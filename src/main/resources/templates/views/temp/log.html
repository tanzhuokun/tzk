<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>项目健康监控系统</title>
<link rel="stylesheet" href="/zui/dist/css/zui.min.css">
<link rel="stylesheet" href="/zui/dist/css/doc.min.css">
<link rel="stylesheet" href="/mescroll-master/dist/mescroll.css">
<link rel="stylesheet" href="/layui/css/layui.css" media="all">
<link rel="stylesheet" href="/css/app.css" />
<link href="/zui/dist/lib/datetimepicker/datetimepicker.min.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="/adminLTE/bower_components/bootstrap/dist/css/bootstrap.min.css">
<!-- Font Awesome -->
<link rel="stylesheet"
	href="/adminLTE/bower_components/font-awesome/css/font-awesome.min.css">
<!-- Ionicons -->
<link rel="stylesheet"
	href="/adminLTE/bower_components/Ionicons/css/ionicons.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="/adminLTE/dist/css/AdminLTE.min.css">
<!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
<link rel="stylesheet"
	href="/adminLTE/dist/css/skins/_all-skins.min.css">
<!-- Morris chart -->
<link rel="stylesheet"
	href="/adminLTE/bower_components/morris.js/morris.css">
<!-- jvectormap -->
<link rel="stylesheet"
	href="/adminLTE/bower_components/jvectormap/jquery-jvectormap.css">
<!-- Date Picker -->
<link rel="stylesheet"
	href="/adminLTE/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
<!-- Daterange picker -->
<link rel="stylesheet"
	href="/adminLTE/bower_components/bootstrap-daterangepicker/daterangepicker.css">
<!-- bootstrap wysihtml5 - text editor -->
<link rel="stylesheet"
	href="/adminLTE/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">

<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

<script src="/zui/dist/lib/datetimepicker/datetimepicker.min.js"></script>
<script type="text/javascript" src="/jquery-3.3.1/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/zui/dist/js/zui.min.js"></script>
<script type="text/javascript" src="/vue/vue.js"></script>
<script type="text/javascript" src="/layui/layui.js"></script>
<script type="text/javascript" src="/mescroll-master/dist/mescroll.js"></script>
<script type="text/javascript" src="/echartsjs/echarts.min.js"></script>
<!-- jQuery 3 -->
<script src="/adminLTE/bower_components/jquery/dist/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/adminLTE/bower_components/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
	$.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script
	src="/adminLTE/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->
<script src="/adminLTE/bower_components/raphael/raphael.min.js"></script>
<script src="/adminLTE/bower_components/morris.js/morris.min.js"></script>
<!-- Sparkline -->
<script
	src="/adminLTE/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script
	src="/adminLTE/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script
	src="/adminLTE/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script
	src="/adminLTE/bower_components/jquery-knob/dist/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="/adminLTE/bower_components/moment/min/moment.min.js"></script>
<script
	src="/adminLTE/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
<!-- datepicker -->
<script
	src="/adminLTE/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<script
	src="/adminLTE/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- Slimscroll -->
<script
	src="/adminLTE/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="/adminLTE/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="/adminLTE/dist/js/adminlte.min.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="/adminLTE/dist/js/pages/dashboard.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/adminLTE/dist/js/demo.js"></script>
<style type="text/css">
.layui-form {
	margin-left: 70px;
	float: left;

	background-color: #FFFFFF;
	position: absolute;
	bottom:50px;
	
}

.box-r{
width: 36%;
margin-right: 70px;
position: absolute;
	bottom:150px;
	right: 0px
   }

#demo-3 .layui-form{
 width: 48%!important;
}

@media  screen and (max-width: 980px) {
   #main{
   margin-left: 45px!important;
   }
   
    #main-1{
    margin-right: 32px!important;
   }
   
   .layui-form{
   width: 45%!important;
   }
   
   .H1{
   margin-left: 42%!important;
   }
   
   .box-r{
  
   }
}
</style>
</head>
<body style="background-color: #f2edf3;">
	<!-- 标题 -->
	<div class="ms-header">
		<div class="c-view">
			<a href="index1"> <span class="logo white font24 lineh80">项目健康监控系统</span>
			</a>
			<div class="nav fr">
				<!-- <a href="index">首页</a> -->
				<a href="platform">首页</a> <a href="log">日志记录</a> <a href="excption">服务器状态</a>
				<!-- <a class="active" href="#">精准数据</a> -->
				<a href="setting"> <i class="icon icon-2x icon-spin icon-cog"></i>
				</a> <a href="note"> <i class="icon icon-2x icon-envelope"></i>
				</a>
			</div>
		</div>
	</div>
	<!-- 标题结束 -->

	<section class="content-header" style="margin-top: 80px;">
		<h1 class="H1" style=" margin-left: 50px;">
			日志 <small>统计记录</small>
		</h1>
		<ol class="breadcrumb" >
			<li><a href="index1"><i class="fa fa-dashboard"></i> 主页</a></li>
			<li class="active">日志记录</li>
		</ol>
	</section>

 <div class="clearfix" style="position: relative;">

	<div class="box box-primary "
		style="margin-top: 50px; width: 45%; margin-left: 50px; height: 450px;float: left;">
		<div class="box-header with-border" style="margin-left: 20px;">
			<i class="fa fa-bar-chart"></i>
			<h3 class="box-title" style="margin-top: 15px;">日志级别每天发生次数统计</h3>
		</div>
	</div>
	<div id="main"
		style="width: 600px; height: 400px; position: absolute; margin-left: 60px; float: left;bottom: 15px;"></div>

	<script type="text/javascript">
		// 基于准备好的dom，初始化echarts实例
		var myChart = echarts.init(document.getElementById('main'));

		// 指定图表的配置项和数据
		$.get('/cgi-bin/countLogLevel').done(function(data){
			myChart.setOption ({
				title : {
					text : ''
				},
				tooltip : {},
				legend : {
					data : [ '天/日志数量' ]
				},
				xAxis : {
					data : [ "ERROR", "WARN", "INFO", "DEBUG", "FAFAL"]
				},
				yAxis : {},
				series : [ {
					name : '天/日志数量',
					type : 'bar',
					data : data
				} ]
			});
		});


	</script>

	<div class="box box-primary"
		style=" width: 45%;  height: 450px;float: right;margin-top: 50px;margin-right: 35px;">
		<div class="box-header with-border" style="margin-left: 20px;">
			<i class="fa fa-pie-chart"></i>
			<h3 class="box-title" style="margin-top: 15px;">高发日志</h3>
		</div>
	</div>

	<div id="main-1"
		style="width: 44%; height: 400px; position: absolute;  float: right;margin-right: -30px;right: 0;bottom:0;"></div>

	<script type="text/javascript">
	var myChart1 = echarts.init(document.getElementById('main-1'));
	$.get('/cgi-bin/titleLogName').done(function(data){
		$.get('/cgi-bin/titleLogCount',function(num){
		/* alert(data);
		alert(num); */
		myChart1.setOption({
			title : {
				text : '日志发生位置',
				subtext: '',
				x : 'center'
			},
			tooltip : {
				trigger : 'item',
				formatter : "{a} <br/>{b} : {c} ({d}%)"
			},
			legend : {
				orient : 'vertical',
				left : 'left',
				data : ['restartedMain','main','cTaskExecutor','systemLog','ReadyData']
			},
			series : [ {
				name : '访问来源',
				type : 'pie',
				radius : '55%',
				center : [ '50%', '60%' ],
				data : [
	                {value:335, name:'restartedMain'},
	                {value:310, name:'main'},
	                {value:234, name:'cTaskExecutor'},
	                {value:135, name:'systemLog'},
	                {value:1548, name:'ReadyData'}
	            ],
				itemStyle : {
					emphasis : {
						shadowBlur : 10,
						shadowOffsetX : 0,
						shadowColor : 'rgba(0, 0, 0, 0.5)'
					}
				}
			} ]
		});
		});
		
	});
	</script>
</div>
	<div
		style="width: 100%; height: 20px; background-color: #000000; margin-top: 100px;"></div>
	<div
		style="width: 100%; height: 50px; background-color: #fbfbfb; box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);">
		<div style="margin-top: 10px; position: absolute; margin-left: 35px;">
			<span style="font-size: 20px; font-weight: bold;">日志详情表 <small
				style="font-size: 15px; display: inline-block; padding-left: 4px; font-weight: 300; color: #999;">详细日志统计</small>
			</span>
		</div>
	</div>
	<div class="clearfix" style="position: relative;margin-bottom: 120px">
	<div class="box-1"
		style="margin-top: 100px; height: 600px; background-color: #ffffff; margin-left: 25px; margin-right: 10px; border: 2px solid; border-radius: 25px; -moz-border-radius: 25px; border-color: #909090; opacity: 1.5;">
		<span
			style="font-size: 20px; width: 900px; height: 50px; margin-left: 50px; position: absolute; margin-top: 20px;">日志详情</span>
		<div
			style="width: 100%; height: 20px; background-color: #000000; margin-top: 70px; opacity: 0.7;"></div>
	</div>
	<!-- 数据表格 -->
	<table class="layui-hide" id="demo-3"></table>

	<div  class="box-r" style=" float:right;">
		<p class="text-center">
			<strong>日志级别占比条数</strong>
		</p>

		<div class="progress-group">
			<span class="progress-text">ERROR</span> <span
				class="progress-number"><b>10</b>/200</span>

			<div class="progress sm">
				<div class="progress-bar progress-bar-aqua" style="width: 5%"></div>
			</div>
		</div>
		<!-- /.progress-group -->
		<div class="progress-group">
			<span class="progress-text">DEBUG</span> <span
				class="progress-number"><b>30</b>/200</span>

			<div class="progress sm">
				<div class="progress-bar progress-bar-red" style="width: 15%"></div>
			</div>
		</div>
		<!-- /.progress-group -->
		<div class="progress-group">
			<span class="progress-text">INFO</span> <span class="progress-number"><b>100</b>/200</span>

			<div class="progress sm">
				<div class="progress-bar progress-bar-green" style="width: 50%"></div>
			</div>
		</div>
		<!-- /.progress-group -->
		<div class="progress-group">
			<span class="progress-text">WARN</span> <span class="progress-number"><b>60</b>/200</span>

			<div class="progress sm">
				<div class="progress-bar progress-bar-yellow" style="width: 25%"></div>
			</div>
		</div>
		<!-- /.progress-group -->
	</div>
	<script>
		layui.use('table', function() {
			var table = layui.table;

			//展示已知数据
			table.render({
				elem : '#demo-3',
				url : '/cgi-bin/logDetails',
				page : true, //是否显示分页
				limits: [5, 7, 10]
				,
				cols : [ [ //标题栏
				{
					field : 'username',
					title : '平台名称',
					width : 100,
					align : 'center',
					sort : true
				}, {
					field : 'subTime',
					title : '时间',
					align : 'center',
					width : 180,
					sort : true
				}, {
					field : 'method',
					title : '日志名称',
					align : 'center',
					width : 150,
					sort : true
				}, {
					field : 'loglevel',
					title : '日志等级',
					align : 'center',
					width : 100,
					sort : true
				}, {
					field : 'logmsg',
					title : '日志详情',
					align : 'center',
					minWidth : 130
				}] ],
				
				skin : 'row' //表格风格
				,
				even : true,
				width: 700,
				height: 400,
				limit : 10
			//每页默认显示的数量
			});
		});
	</script>
	<!-- 数据表格end -->
	<!-- log-3 end -->

</div>

	<div class="footer"
		style="height: 50px; background-color: #2c2c32; margin-top: 40px;">
		<p
			style="color: white; text-align: center; line-height: 50px; margin: 0;">云南农业大学电子信息工程系&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;谭卓昆、王顺通团队制作</p>
	</div>








</body>
</html>